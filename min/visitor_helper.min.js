!function(a){SMHelper={},SMHelper.API_DOMAINS={production:"api.salemove.com",beta:"api.beta.salemove.com",local:"api.local.dev"},SMHelper.setup=function(a,b){if(!a)throw"Api is required";b||(console.warn("Environment was not provided. Setting default to local"),b="local"),SMHelper.API_DOMAIN=SMHelper.API_DOMAINS[b],SMHelper.HEADERS=a.getRequestHeaders()},SMHelper.getCurrentVisit=function(){return new Promise(function(a,b){var c=new XMLHttpRequest;c.open("GET","https://"+SMHelper.API_DOMAIN+"/visitor/visit"),Object.keys(SMHelper.HEADERS).forEach(function(a){c.setRequestHeader(a,SMHelper.HEADERS[a])}),c.onload=function(){c.status>=200&&c.status<300?a(JSON.parse(c.responseText)):b(c.statusText)},c.onerror=function(){b(c.statusText)},c.send()})},SMHelper.updateVisitorInformation=function(a,b,c,d){return new Promise(function(e,f){var g=new XMLHttpRequest;g.open("POST","https://"+SMHelper.API_DOMAIN+"/visitor"),Object.keys(SMHelper.HEADERS).forEach(function(a){g.setRequestHeader(a,SMHelper.HEADERS[a])}),g.onload=function(){g.status>=200&&g.status<300?e(JSON.parse(g.responseText)):f(g.statusText)},g.onerror=function(){f(g.statusText)},g.send(JSON.stringify({note_update_method:"append",custom_attributes:d,name:a,email:b,phone:c}))})},a.SMHelper=SMHelper}(sm);